<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gink</title>
</head>
<body>
<h1>Connections:</h1>
<ul id="peersList"></ul>

<script>

    const socket = new WebSocket('ws://localhost:8080');

    socket.onmessage = function(event) {
        if (!event.data instanceof Blob) {
            const peersList = document.getElementById('peersList');
            const peers = JSON.parse(event.data);

            peersList.innerHTML = '';

            if (peers.length > 0) {
                peers.forEach(function(connectionId) {
                    const listItem = document.createElement('li');
                    listItem.textContent = connectionId.toString();
                    peersList.appendChild(listItem);
                });
            } else {
                peersList.innerHTML = 'No peers';
            }
        }

    };

    socket.onopen = function() {
        socket.send('getPeers');
    };

</script>

</body>
</html>
